{"openapi":"3.1.0","info":{"title":"Smart Reply Service","version":"0.1.0"},"paths":{"/health":{"get":{"tags":["reply"],"summary":"Health","operationId":"health_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}},"429":{"description":"Rate limit exceeded"}}}},"/v1/reply/draft":{"post":{"tags":["reply"],"summary":"Generate three channel-appropriate reply drafts","description":"Generates three reply drafts tailored to the specified channel (email, Slack, LinkedIn). Applies channel-specific formatting rules (greeting/sign-off for email, bullets/length for Slack, short paragraphs and soft CTA for LinkedIn) and honours constraints like max words, must-include-question, and avoid phrases. Defaults to UK English spelling unless overridden via options.","operationId":"create_reply_draft_v1_reply_draft_post","parameters":[{"name":"x-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Api-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DraftRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DraftResponse"}}}},"429":{"description":"Rate limit exceeded"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Constraints":{"properties":{"max_words":{"anyOf":[{"type":"integer","maximum":500.0,"minimum":1.0},{"type":"null"}],"title":"Max Words","description":"Maximum words allowed in a draft."},"must_include_question":{"type":"boolean","title":"Must Include Question","description":"Whether the draft must contain a question.","default":false},"avoid_phrases":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Avoid Phrases","description":"Phrases to exclude; up to 20 items."}},"type":"object","title":"Constraints"},"Draft":{"properties":{"label":{"type":"string","title":"Label"},"text":{"type":"string","title":"Text"}},"type":"object","required":["label","text"],"title":"Draft"},"DraftRequest":{"properties":{"incoming_message":{"type":"string","maxLength":8000,"minLength":1,"title":"Incoming Message","description":"Incoming user message or email body."},"context":{"anyOf":[{"type":"string","maxLength":4000},{"type":"null"}],"title":"Context","description":"Optional extra context about thread or user."},"channel":{"type":"string","enum":["email","slack","linkedin"],"title":"Channel","description":"Delivery channel.","default":"email"},"tone":{"type":"string","enum":["friendly","professional","concise","assertive","apologetic","polite","neutral"],"title":"Tone","description":"Requested tone.","default":"professional"},"constraints":{"anyOf":[{"$ref":"#/components/schemas/Constraints"},{"type":"null"}]},"options":{"anyOf":[{"$ref":"#/components/schemas/Options"},{"type":"null"}]}},"type":"object","required":["incoming_message"],"title":"DraftRequest"},"DraftResponse":{"properties":{"request_id":{"type":"string","title":"Request Id"},"detected_tone":{"type":"string","title":"Detected Tone"},"channel_applied":{"type":"string","enum":["email","slack","linkedin"],"title":"Channel Applied"},"drafts":{"items":{"$ref":"#/components/schemas/Draft"},"type":"array","maxItems":3,"minItems":3,"title":"Drafts"},"notes":{"type":"string","title":"Notes"},"confidence_score":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Confidence Score"}},"type":"object","required":["request_id","detected_tone","channel_applied","drafts","notes","confidence_score"],"title":"DraftResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthResponse":{"properties":{"status":{"type":"string","const":"ok","title":"Status"},"service":{"type":"string","title":"Service","default":"smart-reply-service"}},"type":"object","required":["status"],"title":"HealthResponse"},"Options":{"properties":{"emoji":{"type":"boolean","title":"Emoji","description":"Allow emojis in drafts.","default":false},"uk_english":{"type":"boolean","title":"Uk English","description":"Use UK English spelling by default.","default":true}},"type":"object","title":"Options"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}